<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link
      rel="icon"
      type="image/x-icon"
      href="img/png-transparent-padlock-computer-icons-padlock-cdr-technic-logo.png"
    />
    <title>Encriptador de texto</title>
  </head>
  <body>
    <header>
      <h1><img src="img/logo.png" alt="logo" /></h1>
    </header>
    <main>
      <div id="container-encryptor">
        <div id="entry">
          <div id="entry__input">
            <!--<input type="text" value="Ingrese el texto aqui">-->
            <textarea
              id="textarea"
              placeholder="Ingrese el texto aqui"
            ></textarea>
          </div>
          <div id="entry__alert">
            <p>
              <img src="img/bi_exclamation-circle-fill.svg" />Solo letras
              minúsculas y sin acentos
            </p>
          </div>
          <div id="entry_buttons">
            <button id="encriptar">Encriptar</button>
            <button id="desencriptar">Desencriptar</button>
          </div>
        </div>

        <div id="display">
          <!--<div id="inactive">
            <img src="img/Muñeco.svg" alt="svg img" />
            <div id="inactive__text">
              <h3>Ningún mensaje fue encontrado</h3>
              <p>Ingresa el texto que desees encriptar o desencriptar.</p>
            </div>
          </div>-->

          <div id="active">
            <p id="result">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Orci
              montes, sit et diam risus scelerisque vitae est. Tortor maecenas
              nunc ut laoreet. Eget diam mauris quam quisque ut eget fringilla
              sit elit. Libero, sodales duis fames id diam feugiat aliquet non
              egestas.
            </p>
            <button id="copy">Copiar</button>
          </div>
        </div>
      </div>
    </main>

    <script>
      let encriptarButton = document.getElementById("encriptar");
      let desencriptarButton = document.getElementById("desencriptar");
      let textarea = document.getElementById("textarea");
      let result = document.getElementById("result");
      let resultado = "";
      let copyButton = document.getElementById("copy");

      /*La letra "e" es convertida para "enter"
                    La letra "i" es convertida para "imes"
                    La letra "a" es convertida para "ai"
                    La letra "o" es convertida para "ober"
                    La letra "u" es convertida para "ufat"*/

      function encriptar() {
        let string = textarea.value;

        for (let index in string) {
          switch (string[index]) {
            case "e":
              resultado += "enter";
              break;

            case "i":
              resultado += "imes";
              break;
            case "a":
              resultado += "ai";
              break;

            case "o":
              resultado += "ober";
              break;

            case "u":
              resultado += "ufat";
              break;
            default:
              resultado += string[index];
          }
        }

        result.innerHTML = resultado;
        string=""
        resultado=""
      }

      function textLength(length, text) {
        let r = "";
        for (let i = 0; i < length; i++) {
          if (text[i]) {
            r += text[i];
          }
        }
        return r;
      }

      function desencriptar() {
        let string = textarea.value;
        
        let antiVocales = ["ai", "imes", "ober", "ufat", "enter"];

        for (let ant in antiVocales) {
          let expReg=new RegExp(antiVocales[ant])
      
          while (expReg.test(string)) {
           
            string = string.replace(antiVocales[ant], antiVocales[ant][0]);
            
            
          }
        }

        resultado = string;
        result.innerHTML = resultado;
        string=""
        resultado=""
      }

      function copy() {
        navigator.clipboard
          .writeText(result.innerHTML)
          .then(() => {
            console.log("Text copied to clipboard...");
          })
          .catch((err) => {
            console.log("Something went wrong", err);
          });
      }

      encriptarButton.onclick = encriptar;
      desencriptarButton.onclick = desencriptar;
      copyButton.onclick = copy;
    </script>
  </body>
</html>
